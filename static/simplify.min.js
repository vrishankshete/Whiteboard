(function(n,t){"use strict";function i(n,t){var i=n.x-t.x,r=n.y-t.y;return i*i+r*r}function r(n,t,i){var f=t.x,e=t.y,r=i.x-f,u=i.y-e,o;return(r!==0||u!==0)&&(o=((n.x-f)*r+(n.y-e)*u)/(r*r+u*u),o>1?(f=i.x,e=i.y):o>0&&(f+=r*o,e+=u*o)),r=n.x-f,u=n.y-e,r*r+u*u}function u(n,t){for(var o=n.length,r,f=n[0],e=[f],u=1;u<o;u++)r=n[u],i(r,f)>t&&(e.push(r),f=r);return f!==r&&e.push(r),e}function f(n,i){var c=n.length,p=typeof Uint8Array!=t+""?Uint8Array:Array,o=new p(c),e=0,f=c-1,u,s,l,h,a=[],v=[],y=[];for(o[e]=o[f]=1;f;){for(s=0,u=e+1;u<f;u++)l=r(n[u],n[e],n[f]),l>s&&(h=u,s=l);s>i&&(o[h]=1,a.push(e),v.push(h),a.push(h),v.push(f));e=a.pop();f=v.pop()}for(u=0;u<c;u++)o[u]&&y.push(n[u]);return y}var e=typeof exports!=t+""?exports:n;e.simplify=function(n,i,r){var e=i!==t?i*i:1;return r||(n=u(n,e)),f(n,e)}})(this);
